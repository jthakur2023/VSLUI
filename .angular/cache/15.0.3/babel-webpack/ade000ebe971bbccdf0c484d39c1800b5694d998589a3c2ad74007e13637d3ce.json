{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/listing.service\";\nimport * as i2 from \"../../_services/storage.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction AddListingComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 2)(2, \"label\", 3);\n    i0.ɵɵtext(3, \"Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function AddListingComponent_div_4_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.listing.address = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 2)(6, \"label\", 5);\n    i0.ɵɵtext(7, \"University\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function AddListingComponent_div_4_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.listing.university = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 2)(10, \"label\", 7);\n    i0.ɵɵtext(11, \"Semester\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function AddListingComponent_div_4_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.listing.semester = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 2)(14, \"label\", 9);\n    i0.ɵɵtext(15, \"Rent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function AddListingComponent_div_4_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.listing.rent = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"input\", 11);\n    i0.ɵɵlistener(\"change\", function AddListingComponent_div_4_Template_input_change_17_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.upload($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function AddListingComponent_div_4_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.saveListing());\n    });\n    i0.ɵɵtext(19, \"Submit\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.listing.address);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.listing.university);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.listing.semester);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.listing.rent);\n  }\n}\nfunction AddListingComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\");\n    i0.ɵɵtext(2, \"Listing was submitted successfully!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function AddListingComponent_div_5_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.newListing());\n    });\n    i0.ɵɵtext(4, \"Add\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class AddListingComponent {\n  constructor(listingService, storageService) {\n    this.listingService = listingService;\n    this.storageService = storageService;\n    this.data = new FormData();\n    this.listing = {\n      address: '',\n      university: '',\n      semester: '',\n      rent: '',\n      image: ''\n    };\n    this.submitted = false;\n  }\n  ngOnInit() {\n    this.currentUser = this.storageService.getUser();\n  }\n  saveListing() {\n    const data = {\n      address: this.listing.address,\n      university: this.listing.university,\n      semester: this.listing.semester,\n      rent: this.listing.rent,\n      userid: this.currentUser.id,\n      image: this.listing.image\n    };\n    this.listingService.create(data).subscribe({\n      next: res => {\n        console.log(res);\n        this.submitted = true;\n      },\n      error: e => console.error(e)\n    });\n  }\n  newListing() {\n    this.submitted = false;\n    this.listing = {\n      address: '',\n      university: '',\n      semester: '',\n      rent: ''\n    };\n  }\n  upload(event) {\n    const file = event.target.files[0];\n    this.data.append('file', file);\n    this.listingService.fileUpload(this.data).subscribe({\n      next: res => {\n        console.log(res);\n        this.listing.image = res.filename;\n        //this.submitted = true;\n      },\n\n      error: e => console.error(e)\n    });\n  }\n}\nAddListingComponent.ɵfac = function AddListingComponent_Factory(t) {\n  return new (t || AddListingComponent)(i0.ɵɵdirectiveInject(i1.ListingService), i0.ɵɵdirectiveInject(i2.StorageService));\n};\nAddListingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddListingComponent,\n  selectors: [[\"app-add-listing\"]],\n  decls: 6,\n  vars: 2,\n  consts: [[1, \"submit-form\"], [4, \"ngIf\"], [1, \"form-group\"], [\"for\", \"address\"], [\"type\", \"text\", \"id\", \"address\", \"required\", \"\", \"name\", \"address\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"university\"], [\"id\", \"university\", \"required\", \"\", \"name\", \"university\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"semester\"], [\"id\", \"semester\", \"required\", \"\", \"name\", \"semester\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"rent\"], [\"id\", \"rent\", \"required\", \"\", \"name\", \"rent\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", 3, \"change\"], [1, \"btn\", \"btn-success\", 3, \"click\"]],\n  template: function AddListingComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"h4\");\n      i0.ɵɵtext(2, \"Create a New Listing\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 0);\n      i0.ɵɵtemplate(4, AddListingComponent_div_4_Template, 20, 4, \"div\", 1);\n      i0.ɵɵtemplate(5, AddListingComponent_div_5_Template, 5, 0, \"div\", 1);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", !ctx.submitted);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.submitted);\n    }\n  },\n  dependencies: [i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.RequiredValidator, i4.NgModel],\n  styles: [\".submit-form[_ngcontent-%COMP%] {\\n  max-width: 400px;\\n  margin: auto;\\n}\\n/*# sourceURL=webpack://./src/app/myListing components/add-listing/add-listing.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbXlMaXN0aW5nIGNvbXBvbmVudHMvYWRkLWxpc3RpbmcvYWRkLWxpc3RpbmcuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFnQjtFQUNoQixZQUFZO0FBQ2QiLCJzb3VyY2VzQ29udGVudCI6WyIuc3VibWl0LWZvcm0ge1xuICBtYXgtd2lkdGg6IDQwMHB4O1xuICBtYXJnaW46IGF1dG87XG59XG5cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","AddListingComponent","constructor","listingService","storageService","FormData","address","university","semester","rent","image","ngOnInit","currentUser","getUser","saveListing","data","listing","userid","id","create","subscribe","next","res","console","log","submitted","error","e","newListing","upload","event","file","target","files","append","fileUpload","filename","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/lakshman/projects/VSLUI/src/app/myListing components/add-listing/add-listing.component.html","/Users/lakshman/projects/VSLUI/src/app/myListing components/add-listing/add-listing.component.ts"],"sourcesContent":[" <div>\n  <h4>Create a New Listing</h4>\n  <div class=\"submit-form\">\n    <div *ngIf=\"!submitted\">\n      <div class=\"form-group\">\n        <label for=\"address\">Address</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          id=\"address\"\n          required\n          [(ngModel)]=\"listing.address\"\n          name=\"address\"\n        />\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"university\">University</label>\n        <input\n          class=\"form-control\"\n          id=\"university\"\n          required\n          [(ngModel)]=\"listing.university\"\n          name=\"university\"\n        />\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"semester\">Semester</label>\n        <input\n          class=\"form-control\"\n          id=\"semester\"\n          required\n          [(ngModel)]=\"listing.semester\"\n          name=\"semester\"\n        />\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"rent\">Rent</label>\n        <input\n          class=\"form-control\"\n          id=\"rent\"\n          required\n          [(ngModel)]=\"listing.rent\"\n          name=\"rent\"\n        />\n      </div>\n\n      <input type=\"file\" (change)=\"upload($event)\" />\n\n      <button (click)=\"saveListing()\" class=\"btn btn-success\">Submit</button>\n    </div>\n\n    <div *ngIf=\"submitted\">\n      <h4>Listing was submitted successfully!</h4>\n      <button class=\"btn btn-success\" (click)=\"newListing()\">Add</button>\n    </div>\n  </div>\n</div>\n\n\n ","import { Component } from '@angular/core';\nimport { Listing } from 'src/app/models/Listing.model';\nimport { ListingService } from 'src/app/services/listing.service';\nimport { StorageService } from '../../_services/storage.service';\n\n\n@Component({\n  selector: 'app-add-listing',\n  templateUrl: './add-listing.component.html',\n  styleUrls: ['./add-listing.component.css']\n})\nexport class AddListingComponent {\n\n  currentUser: any;\n\n  data = new FormData();\n\n  listing: Listing = {\n    address: '',\n    university: '',\n    semester: '',\n    rent: '',\n    image: '',\n  };\n  submitted = false;\n\n  constructor(private listingService: ListingService, private storageService: StorageService) { }\n\n  ngOnInit(): void {\n    this.currentUser = this.storageService.getUser();\n  }\n\n  saveListing(): void {\n    const data = {\n      address: this.listing.address,\n      university: this.listing.university,\n      semester: this.listing.semester,\n      rent: this.listing.rent,\n      userid: this.currentUser.id,\n      image: this.listing.image,\n    };\n    \n\n    this.listingService.create(data)\n      .subscribe({\n        next: (res) => {\n          console.log(res);\n          this.submitted = true;\n        },\n        error: (e) => console.error(e)\n      });\n  }\n\n  newListing(): void {\n    this.submitted = false;\n    this.listing = {\n      address: '',\n      university: '',\n      semester: '',\n      rent: '',\n    };\n  }\n\n  upload(event: any) {\n    const file = event.target.files[0];\n\n    \n    this.data.append('file', file);\n\n\n    this.listingService.fileUpload(this.data)\n      .subscribe({\n        next: (res) => {\n          console.log(res);\n          this.listing.image = res.filename;\n          //this.submitted = true;\n        },\n        error: (e) => console.error(e)\n      });\n  }\n\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}